软件 学报 
 JOURNALOFSOFTWARE 
 1999 年 第 2 期 No.21999 
 
 
 
 用于 描述 网络拓扑 的 形式语言 的 研究 * 
 于 之硕 　 杨 　 静 
 　 　 摘要 　 论述 了 应用 随机 线性 文法 及 产生 式 描述 计算机 网络拓扑 结构 的 方法 . 在 该 形式语言 的 描述 中 , 设置 了 3 个 基元 状态 , 通过 对 基元 状态 及 各种 状态 规律 的 分析 , 准确 地 描述 了 网络 中 结点 间通信 及 共享存储器 的 状态 . 同时 , 证明 了 用 此 方法 在 某种 条件 下 从 初始 结点 到 终了 结点 间 可以 建立 惟一 的 访问 路径 , 并 能 避免 冲突 . 此 方法 对 计算机网络 结点 访问 / 冲突 避免 的 研究 具有 一定 的 参考价值 . 
 　 　 关键词 　 概率 矩阵 , 文法 , 基元 , 网络 . 
 　 　 中图法 分类号 　 TP301 
 ResearchofaFormalLanguageforDescribingomputerNetworkTopology 
 YUZhi - shou 　 YANGJing 
 　 　 Abstract 　 　 Beingdifferentfromthegeneralmethod , aformallanguageandgrammar , stochasticlinergrammaranditsrepresentationareusedtodescribethetopologylogicofthecomputernetworkbyanalyzingthegrammarofthreeelementalstatuses . Itcanbeseenthatcombiningthemmaydescribestatusesofeachnodeincommunicationandsharedmemoryofthecomputernetwork . Inthispaper , itisprovedthatthegrammarcanestablishonlyroutebetweenthestartnodeandtheterminalnodeinsomeconditions . Underconditionsaboveifmayavoidcollision . Theuseandthelimitofthegrammararepresentedattheendofthepaper . 
 　 　 Keywords 　 Probabilitymatrix , grammar , baseelement , network . 
 　 　 对 计算机 网络拓扑 结构 的 设计 , 容量 分配 算法 通常 都 采取 基于 图 论及 割集 的 方法 . 本文 所 提出 的 网络 信息 流量 计算 和 分配 方法 是 基于 概率 量度 . 即 一种 语言 及其 文法 , 通过 严格 的 定义 和 文法 产生 式 , 使 网络 抽象 为 一种 语言 表达式 , 再 应用 前人 所 推导 出来 的 语言 性质 精确 地 计算 出 概率 量度 分配 值 , 可使 所 要求 的 计算机网络 中 两个 结点 机 之间 建立 唯一 最佳 的 通信 路径 . 为 使 计算机网络 符合 本文 描述 的 语言 方法 , 特 假设 如下 ： 
 　 　 ( 1 ) 计算机网络 的 完全 图如图 1 ［ 1 ］ 所示 . 其中 每一 结点 都 表示 一个 带有 存储器 的 计算机用户 . 
 
 图 1 　 计算机网络 完全 图 
 　 　 ( 2 ) 计算机网络 中 各 结点 上 有 3 种 状态 ： ① 处理机 申请 某 结点 资源 ； ② 因 资源 “ 忙 ” 而 处于 等待 ； ③ 得到 资源 后 或是 读 或是 写 . 
 　 　 ( 3 ) 设 网上 有 m 个 结点 , 对 K 点 来说 , 它 对 网上 其他 结点 的 访问 概率 Pk 应是 
 Pk = Pki , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 1 ) 
 其中 Pkk 表示 对本 结点 机 的 存储器 访问 . 为 分析 方便 , 可 把 Pk 分成 P ′ k , P ″ k , 即 
 Pk = P ′ k + P ″ k . 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 2 ) 
 其中 P ′ k 为 一类 的 访问 概率 和 , 且 
 P ′ k = Pki 　 　 　 i = { 1 , 2 , ... , q } . 　 　 　 　 　 　 　 　 　 　 　 ( 3 ) 
 P ″ k 为 另一类 的 访问 概率 和 , 且 
 P ″ k = Pki 　 　 　 i = { q + 1 , q + 2 , ... , n } . 　 　 　 　 　 　 　 　 　 　 ( 4 ) 
 　 　 ( 4 ) 网上 每一 结点 随机 请求 资源 符合 马尔科夫 模式 . 
 　 　 ( 5 ) 从 概率 量度 分配 来说 , 对于 星形 网 、 环形 网及 总线网 仅 是 网状 网 的 一种 特殊 情况 . 设 网状 网 的 概率 分配 如 以下 矩阵 ( 与 图 1 等价 ) . 
 
 　 　 而 星形 、 环形 及 总 线形 网 的 概率 分配 矩阵 如图 2 所示 ［ 1 ］ . 由图 2 可见 , 在 具有 相同 结点 数目 的 情况 下 , 矩阵 的 格式 都 为 6 × 6 , 所 不同 的 是 某些 概率 为 零 . 总线网 也 可求 出 概率 分配 矩阵 . 
 
 　 　 　 　 　 　 　 　 　 　 
 ( a ) 星形 网及 概率 矩阵 　 　 　 　 　 　 　 　 ( b ) 星形 网及 概率 矩阵 
 图 2 　 星形 、 环形 网及 概率 矩阵 
 1 　 描述 网络 的 形式语言 模式 
 1.1 　 随机 语言 模式 分类 
 　 　 一般来说 , 随机 描述 文法 有 4 种 类型 及 1 个 派生 型 , 即 ： 0 型 — — 无 限制 文法 ； 1 型 — — 上下文 有关 文法 ； 2 型 — — 上下文 无关 文法 ； 3 型 — — 有限 状态 文法 ； 派生 型 — — 随机 线性 文法 . 
 　 　 各种 文法 可以 描述 各种 随机 事件 , 其 随机 描述语言 的 短语 语法结构 可以 定义 为 一个 四元 式 ［ 2 ］ , 即 
 Gs = ( VN , VT , PS , S ) , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 5 ) 
 其中 VN 为 非 终止符 ； VT 为 终止符 ； PS 为 随机 产生 式 有限 集合 ； S 为 起始 符 , S ∈ VN . 
 　 　 本文 所 引用 的 随机 线性 文法 的 结构 GS 与 式 ( 5 ) 相同 , 但 VN = { A1 ... AK } , S = A1 , VT = { U , V , Ur } , 而 PS 为 Ai → UAjV , Ai → Ur , 且 对于 每个 Aj ∈ VN . 定义 等价 类 CAi 的 通用 表达式 为 
 CAi = { PS 的 所有 左端 为 Ai 的 产生 式 } , 
 即 
 PS = CAi . 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 6 ) 
 　 　 若 对 具体 PS 的 产生 式 为 Ai → UAjV , Ai → Ur 来说 , 设 Ai → UAjV 的 概率 为 Pij , 设 Ai → Ur 的 概率 为 Pir . 对于 第 i 点 的 产生 式 概率 为 
 PS = Pij + Pir . 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 7 ) 
 1.2 　 线性 随机 文法 的 一致性 
 　 　 由于 随机 文法 一致性 的 定义 为 
 禤 （ x ) = 1 , 
 ( 8 ) 
 所以 , 线性 随机 文法 一致性 的 定义 又 可为 
 禤 ij + Pir = 1 . 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 9 ) 
 　 　 上式 的 物理 意义 是 产生 过程 为 具有 ( K + 1 ) 个 对应 于 VNU { T } 状态 的 有限 个 马尔科夫 过程 ［ 2 ］ . 若 GS 是 一致 的 , 则 状态 T 将 对应 于 一个 吸收 状态 , 而 所有 其他 状态 将 都 对应 于 过渡 状态 . 同时 , 对于 产生 式 Ai → UAjV , 则 在 Ai 和 Aj 之间 产生 一条 路径 , 在 Ai 和 Ur 之间 也 产生 一条 路径 . 对 任何 结点 Ai , 每次 仅能 用 上述 两个 产生 式 之一 , 即 某 时刻 从 Ai 开始 生成 的 状态 仅 有 一个 , 若 对于 导出 式 S → x , 相对 于 初始 结点 S 到 终点 有 一条 路径 . 其 更 重要 的 意义 在于 , 若 GS 是 一致 的 , 则 从 初始 结点 到 各 终点 Ur ∈ VT 的 概率 必须 为 1 ［ 3 , 4 ］ . 本文 利用 这些 性质 把 网络 上 所 经过 的 各点 的 状态 和 产生 的 文法 一一对应 起来 , 如果 GS 是 一致 的 , 则 每 一瞬间 保证 有 一对 处理机 建立 了 联接 , 这样 就 会 防止 冲突 . 
 　 　 在 文献 ［ 2 ］ 中 提到 了 判定 随机 线性 文法 GS 一致 的 条件 是 
 limm1 , k + 1 ( n ) = 1 , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 10 ) 
 而 ［ mij ( n ) ］ = Mn = M1 × M2 × ... × Mn , 式 中 M 为 网络 概率 分配 矩阵 . 所以 , m1 , k + 1 ( n ) 表示 M 连乘 N 次后 的 矩阵 中 第 1 行 的 最后 一个 元素 , 即 连乘 后 矩阵 中 最 左上角 的 元素 . limm1 , k + 1 ( n ) = 1 ［ 3 ］ 表示 起始 结点 到 终了 各 结点 的 概率 为 1 . 
 1.3 　 一致性 线性 文法 举例 
 　 　 给定 一个 随机 线性 文法 GS = ( VN , VT , PS , S ) , 其中 VN = { S , A , B } 且 为 非 终点 符 ； VT = { 0 , 1 } 且 为 终点 符 ； S 为 初始状态 ； PS 为 产生 式 . 且 有 
 
 并 设有 分布 矩阵 M1 为 
 
 当 P1 = 0.4 , P2 = 0.5 , P3 = 0.6 时 , 则 有 
 
 当 n → ∞ 时 , 
 
 即 limm1 , 4 ( n ) = 1 . 所以 , 当 文法 产生 式 为 PS , 且 分配 概率 矩阵 为 M1 , 各 概率 分配 P1 = 0.4 , P2 = 0.5 及 P3 = 0.6 时 GS 是 一致 的 . 如果 随机 线性 文法 概率 矩阵 同 上 , 但 其他 条件 不同 , 当 n → ∞ 时 , 有 limm1 , 4 ( n ) ≠ 1 , 则 说明 随机 线性 文法 也 存在 不 一致 . 
 2 　 随机 线性 文法 表示 的 三 基元 网络 状态 
 　 　 根据 本文 概述 中 的 假设 , 网络 上 各 结点 可 处于 “ 申请 资源 ” 、 “ 忙 ” 和 “ 读 或 写 ” 三种 状态 之一 , 而 其他 状态 都 可 由 这 3 种 状态 组合而成 . 本 文选 一种 文法 , 描述 一 结点 对 两个 资源 的 请求 , 而 任何 结点 对 两个 以上 资源 的 请求 总 看作 是 对 两类 资源 的 请求 , 则 概率 分配 符合 PK = P ′ K + P ″ K . 本文 描述 一个 结点 对 两种 资源 的 请求 文法 及 表示 的 状态 为 基元 状态 , 将 推出 的 3 种 基元 状态 用以 描述 及 组合 网上 各 结点 的 一切 状态 ［ 5 ］ . 
 2.1 　 基元 文法 1 
 　 　 本 状态 的 文法 和 产生 式 为 上例 中 GS 和 PS , 该 文法 表示 的 状态 如图 3 所示 . 图 3 表明 , 结点 机 S 可以 对 资源 A 或 B 申请 , 其 概率 分别 为 P1 或 1 - P1 , 对 B 资源 来说 如果 忙 , 由 S 在 B 等待 . 等待 的 概率 是 1 - P3 , 若 B 早已 准备 好 , 由 对 B 资源 输出 （ 或 “ 写 ” , 用 “ 00 ” 表示 ） . 对 A 资源 来说 , 从 S 对 它 请求 以后 , 可 有 两种 选择 ： 一是 通过 A 资源 输入 （ 用 “ 1 ” 表示 , 也 可 认为 是 “ 读 ” ） ； 另 一个 是 通过 A 资源 对 B 资源 请求 , 它 的 概率 是 P2 . 
 
 图 3 　 基于 文法 GS 产生 式 PS 的 状态图 
 2.2 　 基元 文法 2 
 　 　 本 状态 的 文法 GS2 = ( VN , VT , PS2 , S ） . PS2 为 产生 式 , 且 有 : 
 
 　 　 对应 于 GS2 及 PS2 的 状态图 如图 4 所示 . 图 4 表明 , 结点 机 S 可 对 A 及 B 发生 请求 , 而 每 一 资源 都 可 单独 输入 或 输出 . 
 
 图 4 　 对应 GS2 及 产生 式 PS2 的 状态图 
 2.3 　 基元 文法 3 
 　 　 本 状态 的 文法 是 GS3 , 且 GS3 = ( VN , VT , PS3 , s ) . PS3 产生 式 为 : 
 
 　 　 如图 5 所示 , 本 状态 相当于 A 与 B 都 是 “ 读 ” , 它们 的 概率 分别 是 P2 和 P3 ； 而 在 S 对 A 或 对 B 请求 时 , 可能 遇到 A 与 B 都 “ 忙 ” , 则 它们 分别 等待 , 其 概率 为 1 - P2 或 1 - P3 . 而 GS4 = ( VN , VT , PS4 , S ） 是 基元 文法 4 , 但应 归入 到 基元 文法 3 中 . 因为 GS4 描述 了 结点 机 S 对 A 与 B 发生 请求 时 , 置 A 与 B 处于 “ 写 ” 状态 . 
 
 图 5 　 对应 GS3 及 产生 式 PS3 的 状态图 
 2.4 　 基元 文法 所 描述 状态 的 合成 
 　 　 如图 6 所示 , 对 A 资源 除 等待 外 还有 一个 分配 概率 P2 , 主要 对 A 资源 既要 读 ( 概率 1 - P4 ) , 又 要 写 ( 概率 P4 ) . 就 等 于是 把 文法 3 和 文法 2 修改 后 合成 . 其 文法 为 GS5 = ( VN , VT , PS5 , S ) , 其 产生 式 为 GS5 ： 
 
 
 图 6 　 合成 状态 模式 
 3 　 应用 3 种 基元 文法 描述 整个 网络 
 　 　 在 文章 的 开始 部分 , 假设 图 1 中 A , B , C , D 是 结点 机 , E 和 F 是 存储器 , 且 设 E 仅 允许 读 , 如图 7 所示 . 
 
 ( a ) 结点 机 A 状态图 　 　 　 　 　 　 　 　 　 　 ( b ) 只 读存储器 E 状态图 
 图 7 　 对图 1 的 网络 拓朴 结构 的 描述 
 3.1 　 对 结点 机 的 描述 
 　 　 ( 1 ) 对 结点 机 A 的 描述 如图 7 （ a ) 所示 , 其 文法 同 以前 各 状态 定义 , 但 产生 式 PSA 为 : 
 
 　 　 ( 2 ) 对 A 的 状态图 可以 看作 3 个子 状态图 : 
 　 　 ① 对 方框 Ⅰ , 其中 S → A → 1 及 S → A → 0 , 相当于 对 私有 存储器 访问 , 其 概率 为 PAA ； 右枝 相当于 对 网上 其他 各点 访问 , 其 概度 P ′ AA = PAB + PAC + PAE + PAF , 符合 假设 , 方框 Ⅰ 相当于 基元 文法 2 . 
 　 　 ② 对于 方框 Ⅰ Ⅰ , 相当于 对 处理机 B 和 C 的 访问 , 访问 概率 PCH = PAB + PAC , 方框 Ⅱ 相当于 基元 文法 2 . 
 　 　 ③ 对于 方框 Ⅰ Ⅰ Ⅰ , 相当于 对 结点 D 和 对 存储器 E 的 访问 , 且 仅 是 “ 读 ” 状态 ［ 6 ］ . 
 3.2 　 对 只 读存储器 的 描述 
 　 　 ( 1 ) 对 只 读存储器 E 的 描述 如图 7 ( b ) 所示 , 其 文法 仍 是 四元 式 , 产生 式 PSE 为 ： 
 
 　 　 ( 2 ) 可 将 M 状态图 看作 是 3 个子 状态 , 方框 Ⅰ 相当于 基元 文法 2 , 方框 Ⅰ Ⅰ , Ⅰ Ⅰ Ⅰ 相当于 基元 文法 3 . 
 3.3 　 建立 惟一 途径 的 条件 
 　 　 当且 仅 当为子 状态图 的 GS 一致 时 , 才能 在 初始 结点 到 终结 点间 建立 一条 惟一 的 路径 . 对于 基元 文法 各 状态图 的 GS 一致性 的 判断 及 证明 在 前面 已 论述 , 这里 不再 赘述 . 
 4 　 随机 线性 文法 的 应用 
 　 　 前面 给出 了 随机 线性 基元 文法 的 3 种 形式 ( 4 种 状态 ) , 并 利用 它们 来 描述 网络 上 各 处理机 的 状态 和 共享存储器 的 状态 . 其 优点 是 , 当且 仅 当 描述 的 文法 GS 一致 时 , 只 建立 一条 路径 , 这样 可以 避免 冲突 . 但是 , 随机 线性 文法 是 怎样 满足 各 结点 机 的 随机 请求 呢 ？ 
 　 　 ( 1 ) 结点 机对 资源 的 请求 的 文法 按 实测 的 概率 分配 要求 出现 
 　 　 当该 结机 对 某 资源 的 请求 和 出现 概率 一致 时 , 那么 该 结点 机与 该 资源 建立 了 唯一 通路 , 而 其他 资源 都 处于 过渡 状态 . 如 结点 机 A 对 网上 各 结点 的 请求 概率 为 PAB , PAC , ... , PAM , 而 结点 机 A 对 自己 私有 存储器 的 概率 为 PAA , 且 有 PAA + PAB +... PAM = PAj = 1 . 若 对 各 状态 描述 的 文法 出现 的 概率 也 为 PAA , PAB , ... , PAM , 所以 , 结点 机 A 对 私有 存储器 请求 和 出现 文法 的 概率 为 1 - PAA , 结点 机 A 碰 不到 B 出现 的 概率 为 1 - PAB , ... , 结点 机 A 请求 碰 不到 结点 机 M 的 概率 为 1 - PAM , 所以 , 结点 机 A 对 各 资源 请求 平均 不 冲突 的 概率 为 
 　 ( 11 ) 
 　 　 P ′ A 碰 不到 的 概率 实际上 是 结点 机 A 对 网上 每一 结点 平均 请求 的 延迟时间 , 所以 结点 机对 网上 每一 结点 请求 及 服务 的 时间 T 为 
 T = n . Ti + Ti + , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 12 ) 
 式 中 Ti 为 产生 式 中 每个 状态 的 产生 时间 ; 为 服务 时间 ; Ti 为 平均 请求 延迟时间 , 意味着 每一 结点 机对 网 
 上 各 资源 请求 的 各 文法 出现 的 周期 为 
 　 　 当 m → ∞ 时 , 有 
 Ｔ = Ti ( n + 1 ) +. 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 13 ) 
 　 　 ( 2 ) 正常 资源 的 排队 及 服务 时间 
 　 　 一般 情况 下 , 对 网上 各 资源 的 请求 , 若 遇到 忙 , 则 排队 . 对 每 一 资源 来说 , 其 排队 和 服务 时间 为 
 C = , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 14 ) 
 式 中 λ 为 网上 各 结点 对 某 资源 的 平均 访问 比 ; M 为 网上 对 该 资源 请求 的 结点 数 . 
 　 　 ( 3 ) 随机 线性 文法 的 限制 
 　 　 为 使 线性 文法 能 用到 普通 网络 状态 的 描述 上 , 且 又 有 较 快 的 运行 速度 , 由 要求 
 Ｔ Ｃ , 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 15 ) 
 则 有 
 Ti ( n + 1 ) - . 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 16 ) 
 　 　 由式 ( 16 ) 可见 , 随机 线性 文法 能够 被 采用 的 原因 是 文法 的 产生 时间 远远 小于 正常 网络 访问 的 延返 时间 , 也就是说 , 线性 文法 产生 及 识别 时间 可以 忽略不计 , 同时 又 能 避免 访问 冲突 . 
 5 　 结束语 
 　 　 本文 提出 的 3 个 基元 文法 及 产生 式 可以 用于 描述 计算机网络 的 拓扑 结构 及 网络 中 各 结点 的 任意 状态 . 当 结点 状态 描述 所 采用 的 文法 相一致 时 , 两 结点 间 可以 建立 一条 访问 路径 , 而且 这 条 路径 是 唯一 的 最佳 路径 . 为了 求得 比 普通 排队 模式 有 更 快 的 速度 , 系统 必须 遵循 Ti ( n + 1 ) - 的 规则 . 
 　 　 用 形式语言 方法 描述 网络拓扑 及 路由 选择 算法 的 文献 所见 不 多 . 本文 作者 将 通过 计算机网络 的 设计 及 相应 的 连通 量计算 来 评价 形式化 方法 的 优劣 , 以便 为 该 方法 的 实际 应用 提供 可靠 数据 . 
 本文 研究 得到 黑龙江省 自然科学 基金 资助 . 
 作者 介绍 ： 于 之硕 , 1942 年生 , 教授 , 主要 研究 领域 为 专家系统 , 智能 网络 , 决策支持系统 . 
 　 　 　 　 　 杨静 , 女 , 1962 年生 , 副教授 , 主要 研究 领域 为 人工智能 , 网络 研究 . 
 本文 通讯联系 人 ： 于 之硕 , 哈尔滨 150008 , 哈尔滨 建筑 大学 计算机 应用 系 
 作者 单位 ： 于 之硕 　 杨 　 静 　 哈尔滨 建筑 大学 计算机 应用 系 　 哈尔滨 　 150008 
 参考文献 
 　 ［ 1 ］ 达朗伯 姆 . 计算机网络 . 西安 : 陕西 科学技术 出版社 , 1984 ( TANenbaumAS . ComputerNetwork . Xi ' an : ShanxiScienceandTechnologyPublishingHouse , 1984 ) 
 　 ［ 2 ］ 傅京孙 . 模式识别 及 应用 . 北京 : 科学出版社 , 1983 ( FuJing - sun . PatternRecognizeandApplication . Beijing : SciencePress , 1983 ) 
 　 ［ 3 ］ FelerW . Anintroductiontoprobabilitytheoryanditsapplication . ComputerNetwork , 1989 , 14 ( 4 ) : 52 ～ 67 
 　 ［ 4 ］ MarSanMA . MARKOVmodelsformultiplebusmultiprocessorsystem . IEEETransactionsonComputers , 1982 , C.31 ( 3 ) : 25 ～ 27 
 　 ［ 5 ］ 顾 冠群 . 计算机网 ( 第 3 版 ) . 南京 : 江苏 科学技术 出版社 , 1987 ( GuGuan - qun . ComputerNetwork ( 3rded ) . Nanjing : JiangsuScienceandTechnologyPublishingHouse , 1987 ) 
 　 ［ 6 ］ 徐家 福 . 并行 推理 系统 NDPIS 的 设计 . 计算机 研究 与 发展 , 1988 , 25 ( 3 ) : 3 ～ 5 ( XuJia - fu . NDPISdesignofparallelinferencesystem . ComputerResearchandDevelopment , 1988 , 25 ( 3 ) : 3 ～ 5 ) 
 本文 1997 - 11 - 11 收到 原稿 , 1998 - 02 - 11 收到 修改稿 
