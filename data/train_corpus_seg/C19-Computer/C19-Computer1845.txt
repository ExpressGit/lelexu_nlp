微型机 与 应用 
 MICROCOMPUTER & ITSAPPLICATIONS 
 2000Vol.19 No.2 P.53 - 54 
 
 
 
 
 微机 硬盘 引导 扇区 故障 的 解析 与 修复 
 张红 
 摘要 ： 对 硬盘 引导 扇区 的 内容 、 功能 加以分析 ， 讨论 其 发生 故障 的 现象 、 原因 和 修复 方法 。 
 关键词 ： 硬盘 主 引导 扇区 引导 扇区 扇区 故障 
 　 　 硬盘 具有 体积小 ， 容量 大 ， 存取速度 快 ， 记录 密度 高 的 特点 ， 由于 硬盘 内 磁盘 的 盘片 和 磁头 都 被 密封 ， 硬盘 制造 时 空气 要 通过 高效 过滤 口 才能 进入 密封 室内 ， 所以 硬盘 的 硬 故障 ， 即 物理 损坏 ， 如 盘片 划伤 ， 驱动器 控制系统 损坏 等 发生率 大大 低于 另 一种 软故障 ， 如 病毒感染 ， 配置 不当 等 软件 故障 ， 而 许多 软故障 多 与 硬盘 上 的 引导 扇区 的 内容 有关 。 我们 必须 弄清 引导 扇区 的 结构 和 功能 ， 以便 发生 故障 时能 及时 排除 。 
 1 硬盘 主 引导 扇区 及 引导 扇区 
 　 　 硬盘 的 主 引导 扇区 是 位于 硬盘 的 0 柱面 ， 0 磁头 ， 1 扇区 ， 它 是 由 硬盘 的 低级 格式化 程序 生成 ， 其 内容 有 3 部份 ： （ 1 ） 主 引导 程序 （ 主 引导 记录 MBR ） ， （ 2 ） 4 个 分区 项 ， （ 3 ） 结束 标志 字 （ 55AA ） 。 硬盘 的 主 引导 扇区 为 512B ， 启动 微机 系统 时 ， 系统 首先 对 硬件 设备 进行 测试 ， 测试 成功 后 进入 自 举 程序 INT19H ， 然后 读 系统 磁盘 0 柱面 ， 0 磁头 ， 1 扇区 的 主 引导 记录 （ MBR ） 内容 到 内存 指定 单元 ， 0 ： 7C00 首址 开始 的 区域 ， 并 执行 MBR 程序段 。 硬盘 主 引导 记录 （ MBR ） 是 不 属于 任何 1 个 操作系统 的 ， 它 先于 所有 操作系统 而 被 调入 内存 并 发挥作用 。 然后 才 将 控制权 交与 主 分区 熁 疃 分区 犇 诓 僮 飨 低 常 并 让 主 分区 信息 表来 管理 硬盘 。 引导 扇区 是 指 硬盘 中 DOS 分区 开始 的 第 1 个 扇区 ， 即 逻辑 驱动器 的 第 1 个 扇区 又称 BOOT 区 ， 经由 FORMAT 高级 格式化 写 到 该 扇区 ， 有 5 部分 组成 ， 即 ： （ 1 ） 跳转 指令 ， （ 2 ） 厂商 标识 和 DOS 版本号 ， （ 3 ） BPB ， （ 4 ） DOS 引导 程序 ， （ 5 ） 结束 标志 字 （ AA55 ） 。 以上 5 部分 共 占用 512B 。 其 主要 任务 是 重新 设置 引导 驱动器 ， 将 根目录 的 第 1 个 扇区 装载 到 内存 ， 检查 FDT 中 的 前 2 个 文件 是否 为 DOS 的 2 个 系统文件 引 ， 装载 DOS 系统 隐藏 文件 I0 ． SYS 和 IBMI0 ． COM 装载 到 内存 。 
 2 硬盘 引导 扇区 引导 失败 的 修复 
 　 　 引起 系统 不 承认 硬盘 或 硬盘 不能 自举 的 原因 大多 是 关键 程序 区 和 数据 区 信息 损坏 等 软故障 造成 的 。 对于 这 类 软故障 。 用户 大都 可以 根据 屏幕 上 出现 的 提示信息 来 判断 引起 故障 的 原因 。 概括 起来 可 分为 ： CMOS 数据 参数 丢失 。 硬盘 引导 区 ， 主 引导 记录 烳 BR 犓 鸹 担 硬盘 DOS 引导 区 引导 记录 （ DBR ） 出错 3 种 。 
 　 　 1 ． 受损 主 引导 扇区 的 修复 
 　 　 其 一般 故障 有 ： （ 1 ） NOROMBASIC （ 没有 固化 BASIC ） SYSTEMHALT （ 系统 停机 ） ； （ 2 ） INVALIDPARTITIONTABLE （ 无效 的 分区表 ） INVALIDDRIVESPECIFICATION （ 无效 的 驱动器 指令 ） ； （ 3 ） ERRORLOADINGOPERATIONSYSTEM （ 装载 操作系统 错误 ） 。 
 　 　 最 直接 的 修复 方法 是 ： 用 FDISK 重新 分区 ， 以 形成 正确 的 分区表 ， 然后 再用 FORMAT 命令 重新 建立 引导 记录 ， 但 这样 会 使 所有 数据 全部 丢失 。 我们 可以 利用 DEBUG 程序 来 完成 修复 工作 ， 而 原有 数据 不会 受损 。 若 发生 分区表 错误 （ 主 引导 记录 未 被 破坏 ） ， 我们 先用 DEBUG 读取 硬盘 主 引导 记录 ， 然后 在 内存 中 修改 正确 ， 最后 写 回到 硬盘 的 主 引导 扇区 。 
 　 　 例如 ： 若 硬盘 启动 直接 进入 ROM － BASIC ， 或 从 A 盘 启动 后 键入 C ： 却 不 能够 进入 C盘 ， 而 显示 INVALIDDRIVESPECIFICATION ， 那么 ， 我们 可以 采用 该 方法 ： 
 　 　 A ＞ DEBUG 
 　 　 － A100 
 潰 * * * * ： 0100MOVAX ， 201 
 潰 * * * * ： 0103MOVBX ， 200 
 潰 * * * * ： 0106MOVCX ， 1 
 潰 * * * * ： 0109MOVDX ， 80 
 潰 * * * * ： 010CINT13 潰潰 
 　 　 * * * * ： 010EINT3 潰潰 
 　 　 * * * * ： 010F ∧ C － G － 100 （ 将主 引导 记录 读入 200H 开始 的 内存 中 ） 
 　 　 － D3B03FF （ 显示 分区表 ， 发现 引导 标志 为 “ 55 ” 而 不 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 是 “ 80 ” 或 “ 100 ” 
 　 　 － E3BE80 （ 将 引导 标志 改为 80 ） 
 　 　 － E1023 （ 修改 汇编 小 程序 的 第一条 语句 ） 
 　 　 － G － 100 （ 将 修改 后 的 主 引导 记录 写入 硬盘 ） 
 　 　 经 以上 修改 ， 主 引导 记录 的 引导 标志 恢复 为 80 ， 该 故障 现象 消失 。 若主 引导 记录 被 破坏 ， 可 从 另外 一台 启动 正常 、 干净 无毒 且 与 有 故障 微机 的 硬盘分区 相同 的 微机 中 获取 未 被 破坏 的 主 引导 记录 ， 再 写 回原 硬盘 。 
 　 　 2 ． 受损 引导 扇区 引导 记录 的 修复 
 　 　 硬盘 上 引导 记录 （ BDR ） 是 在 用 DOS 命令 FORMAT 对 硬盘 做 格式化 操作 时 生成 的 ， 硬盘 BDR 损坏 以及 DOS 的 3 个 系统文件 损坏 或 丢失 也 都 会 引起 硬盘 不 启动 ， 故障 处理 方法 也 完全相同 。 
 　 　 其 一般 故障 有 ： 
 　 　 MISSINGOPERATIONSYSTEM 
 　 　 NON － SYSTEMDISKORDISKERROR 
 　 　 DISKBOOTFAILURE 
 　 　 BADORMISSINGCOMMANDLNTERPETER 
 　 　 出现 故障 后 ， 可用 含有 与 原 硬盘 上 操作系统 版本 相同 的 A 盘 启动 后 ， 在 A ＞ 提示符 下 运行 ： 
 　 　 A ＞ SYSC ： 
 　 　 当 屏幕 出现 SYSTEMTRANSFERED 时 ， 表示 系统 文件传输 成功 。 若 出现 ： 
 　 　 NOSYSTEMONDEFAULTDRIVE 
 说明 执行命令 的 当前 盘 上 ， 没有 原 启动 计算机 的 DOS 版本 的 3 个 系统文件 。 除 运行 SYS 命令 的 方法 外 ， 还 可 利用 NU ， PCTOOLS 等 工具软件 的 扇区 编辑 功能 直接 对 引导 记录 进行 修复 。 
 张红 （ 辽宁省 卫生 职工 医学院 计算机 室 110005 ） 
 收稿 日期 ： 1999 － 08 － 16 
